function renderLatex() {
    let urlParams = new URLSearchParams(window.location.search);
    let latex = decodeLatex(urlParams.get("latex"));

    //  Mostrar la ecuaci贸n antes de renderizarla para depuraci贸n
    console.log("Ecuaci贸n recibida:", latex);
    document.body.insertAdjacentHTML('beforeend', `<p style="color: green;"> Ecuaci贸n recibida antes de renderizar: ${latex}</p>`);

    if (!latex) {
        document.getElementById("latexOutput").innerHTML = "锔 No se recibi贸 ninguna ecuaci贸n.";
        sendMessageToThunkable("No se recibi贸 ninguna ecuaci贸n.");
        return;
    }

    try {
        document.getElementById("latexOutput").innerHTML = "";

        //  Asegurar que KaTeX reciba correctamente la ecuaci贸n
        let formattedLatex = `\\[${latex}\\]`;

        katex.render(formattedLatex, document.getElementById("latexOutput"), { throwOnError: false, displayMode: true });

        sendMessageToThunkable("Ecuaci贸n renderizada correctamente");
    } catch (error) {
        console.error("Error al renderizar KaTeX:", error);
        document.getElementById("latexOutput").innerHTML = "锔 Error en la ecuaci贸n, revisa la sintaxis.";
        sendMessageToThunkable("Error al renderizar LaTeX");
    }
}
