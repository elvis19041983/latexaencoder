<!DOCTYPE html>
<html>
<head>
  <script>
    function receiveMessage(event) {
      console.log("Mensaje recibido en Web Viewer:", event.data);
      let latex = event.data;
      let encodedLatex = encodeURIComponent(latex);

      // Crear la URL de la imagen con codecogs
      let imgUrl = "https://latex.codecogs.com/png.latex?" + encodedLatex;
      document.getElementById("latexImage").src = imgUrl;
      
      // Enviar la URL de la imagen de vuelta a Thunkable
      if (window.ReactNativeWebView) {
        window.ReactNativeWebView.postMessage(imgUrl);
      }
    }

    // Escuchar mensajes desde Thunkable
    window.addEventListener("message", receiveMessage, false);
  </script>
</head>
<body>
  <p>Imagen generada:</p>
  <img id="latexImage" alt="Cargando imagen..." />
</body>
</html>
