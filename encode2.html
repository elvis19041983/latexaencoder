 <!DOCTYPE html>
<html>
<head>
  <script>
    function encodeLatex() {
      let urlParams = new URLSearchParams(window.location.search);
      let latex = urlParams.get("latex");

      if (!latex) {
        document.getElementById("output").innerText = "‚ùå Error: No se encontr√≥ el par√°metro 'latex'.";
        return;
      }

      // Mostrar el LaTeX recibido
      document.getElementById("output").innerText = "üì© Recibido: " + latex;

      // Codificar correctamente la ecuaci√≥n
      let encodedLatex = encodeURIComponent(latex);

      // Generar la URL de la imagen con Codecogs
      let imgUrl = "https://latex.codecogs.com/png.latex?" + encodedLatex;

      // Mostrar la URL generada
      document.getElementById("debug").innerText = "üîó URL generada: " + imgUrl;

      // Cargar la imagen
      let imgElement = document.getElementById("latexImage");
      imgElement.src = imgUrl;

      // Si la imagen no se carga, mostrar error
      imgElement.onerror = function() {
        document.getElementById("output").innerText = "‚ùå Error al cargar la imagen.";
      };
    }

    window.onload = encodeLatex;
  </script>
</head>
<body>
  <h2>Prueba de Generaci√≥n de Imagen LaTeX</h2>
  <p id="output">‚åõ Esperando mensaje...</p>
  <p id="debug"></p>
  <img id="latexImage" alt="Cargando imagen..." style="border: 1px solid black; max-width: 100%;" />
</body>
</html>
